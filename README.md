# API 测试工具前端

基于 Next.js 和 Tailwind CSS 的 API 测试工具前端界面，用于配置和执行 API 测试，并展示 Allure 测试报告。

## 项目概述

### 核心功能

- 配置 AI 模型参数
- 输入目标 API 信息
- 执行 API 测试
- 展示 Allure 测试报告

### 技术栈

- 前端框架：Next.js 14
- 样式框架：Tailwind CSS
- 状态管理：React Context
- HTTP 客户端：Axios
- UI 组件：Shadcn/ui
- 类型系统：TypeScript

## 功能模块

### 1. 配置模块

- AI 模型配置表单
  - 模型名称输入/选择
  - API Key 输入
  - 模型参数配置
- API 测试配置表单
  - 目标 API 地址
  - 测试参数设置
  - 测试用例配置

### 2. 测试执行模块

- 测试进度展示
- 实时日志显示
- 测试状态管理
- 错误处理机制

### 3. 报告展示模块

- Allure 报告集成
- 测试结果统计
- 失败用例分析

## 页面结构

### 1. 首页/配置页

- 模型配置区域
- API 配置区域
- 测试参数配置区域
- 开始测试按钮

### 2. 测试执行页

- 进度条显示
- 实时日志区域
- 测试状态指示
- 取消/重试按钮

### 3. 报告展示页

- Allure 报告嵌入
- 测试结果摘要
- 失败用例列表
- 报告下载选项

## 数据流

### 1. 配置数据流

- 用户输入 -> 表单验证 -> 本地存储 -> 后端配置

### 2. 测试执行数据流

- 配置数据 -> 测试启动 -> 进度更新 -> 结果收集

### 3. 报告数据流

- 测试结果 -> Allure 生成 -> 报告存储 -> 前端展示

## 安全考虑

### 1. API Key 安全

- 加密存储
- 环境变量管理
- 访问控制

### 2. 数据安全

- 敏感信息过滤
- 请求验证
- 错误处理

## 用户体验

### 1. 配置页面

- 分步配置向导
- 配置模板保存
- 配置验证提示

### 2. 测试执行页面

- 实时进度展示
- 测试日志实时更新
- 错误提示和重试选项

### 3. 报告页面

- 交互式报告查看
- 测试结果筛选
- 失败用例快速定位

## 部署配置

### 1. Vercel 部署

- 环境变量配置
- 构建配置
- 域名设置

### 2. 后端集成

- API 服务配置
- Allure 报告服务配置
- 跨域设置

## 扩展性

### 1. 功能扩展

- 多环境配置
- 测试用例模板
- 批量测试支持

### 2. 集成扩展

- CI/CD 集成
- 通知系统
- 团队协作

### 3. 分析扩展

- 测试趋势分析
- 性能指标
- 覆盖率报告

## 实现步骤

### 1. 项目初始化

- 创建 Next.js 项目
- 配置 Tailwind CSS
- 设置 TypeScript

### 2. 基础架构搭建

- 路由配置
- 状态管理
- API 集成

### 3. 组件开发

- 配置表单组件
- 测试执行组件
- 报告展示组件

### 4. 功能实现

- 配置管理
- 测试执行
- 报告集成

### 5. 部署配置

- Vercel 设置
- 环境变量配置
- 域名配置

## 开发提示词

### 1. 项目概述提示词

```
创建一个基于 Next.js 和 Tailwind CSS 的 API 测试工具前端界面，该工具需要：
1. 允许用户配置 AI 模型参数
2. 输入目标 API 信息
3. 执行 API 测试
4. 展示 Allure 测试报告
```

### 2. 功能模块提示词

```
A. 配置模块
- AI 模型配置表单
  * 模型名称输入/选择
  * API Key 输入
  * 模型参数配置
- API 测试配置表单
  * 目标 API 地址
  * 测试参数设置
  * 测试用例配置

B. 测试执行模块
- 测试进度展示
- 实时日志显示
- 测试状态管理
- 错误处理机制

C. 报告展示模块
- Allure 报告集成
- 测试结果统计
- 失败用例分析
```

### 3. 技术栈提示词

```
使用以下技术栈实现：
- 前端框架：Next.js 14
- 样式框架：Tailwind CSS
- 状态管理：React Context
- HTTP 客户端：Axios
- UI 组件：Shadcn/ui
- 类型系统：TypeScript
```

### 4. 页面结构提示词

```
A. 首页/配置页
- 模型配置区域
- API 配置区域
- 测试参数配置区域
- 开始测试按钮

B. 测试执行页
- 进度条显示
- 实时日志区域
- 测试状态指示
- 取消/重试按钮

C. 报告展示页
- Allure 报告嵌入
- 测试结果摘要
- 失败用例列表
- 报告下载选项
```

### 5. 数据流提示词

```
A. 配置数据流
- 用户输入 -> 表单验证 -> 本地存储 -> 后端配置

B. 测试执行数据流
- 配置数据 -> 测试启动 -> 进度更新 -> 结果收集

C. 报告数据流
- 测试结果 -> Allure生成 -> 报告存储 -> 前端展示
```

### 6. 安全考虑提示词

```
A. API Key 安全
- 加密存储
- 环境变量管理
- 访问控制

B. 数据安全
- 敏感信息过滤
- 请求验证
- 错误处理
```

### 7. 用户体验提示词

```
A. 配置页面
- 分步配置向导
- 配置模板保存
- 配置验证提示

B. 测试执行页面
- 实时进度展示
- 测试日志实时更新
- 错误提示和重试选项

C. 报告页面
- 交互式报告查看
- 测试结果筛选
- 失败用例快速定位
```

### 8. 部署配置提示词

```
A. Vercel 部署
- 环境变量配置
- 构建配置
- 域名设置

B. 后端集成
- API 服务配置
- Allure 报告服务配置
- 跨域设置
```

### 9. 扩展性提示词

```
A. 功能扩展
- 多环境配置
- 测试用例模板
- 批量测试支持

B. 集成扩展
- CI/CD 集成
- 通知系统
- 团队协作

C. 分析扩展
- 测试趋势分析
- 性能指标
- 覆盖率报告
```

### 10. 实现步骤提示词

```
1. 项目初始化
- 创建 Next.js 项目
- 配置 Tailwind CSS
- 设置 TypeScript

2. 基础架构搭建
- 路由配置
- 状态管理
- API 集成

3. 组件开发
- 配置表单组件
- 测试执行组件
- 报告展示组件

4. 功能实现
- 配置管理
- 测试执行
- 报告集成

5. 部署配置
- Vercel 设置
- 环境变量配置
- 域名配置
```

## 使用说明

1. 克隆项目

```bash
git clone [项目地址]
```

2. 安装依赖

```bash
npm install
```

3. 配置环境变量

```bash
cp .env.example .env.local
```

4. 启动开发服务器

```bash
npm run dev
```

5. 构建生产版本

```bash
npm run build
```

6. 部署到 Vercel

```bash
vercel
```

## 贡献指南

1. Fork 项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 许可证

MIT

## 生成测试用例和 Swagger YAML 文件

在生成测试用例的同时，系统会自动将 Swagger JSON 文件转换为 YAML 格式，并存储在项目的 `swagger` 文件夹中。以下是相关步骤：

### 1. 生成测试用例

- 在配置页面中，用户可以选择要测试的 API 端点。
- 点击"开始测试"按钮后，系统会根据配置生成相应的测试用例。

### 2. Swagger JSON 转换

- 系统会自动读取 Swagger JSON 文件。
- 使用转换工具将 JSON 文件转换为 YAML 格式。
- 生成的 YAML 文件将保存在 `swagger` 文件夹中，便于后续查看和使用。

### 3. 查看生成的 YAML 文件

- 用户可以在 `swagger` 文件夹中找到生成的 YAML 文件。
- 该文件可以用于生成 API 文档或进行其他分析。

### 4. 示例代码

```python
import json
import yaml

# 读取 Swagger JSON 文件
with open('swagger.json', 'r') as json_file:
    swagger_data = json.load(json_file)

# 将 JSON 转换为 YAML
with open('swagger/swagger.yaml', 'w') as yaml_file:
    yaml.dump(swagger_data, yaml_file, default_flow_style=False)
```

### 5. 注意事项

- 确保在生成测试用例之前，Swagger JSON 文件已正确配置。
- 生成的 YAML 文件应定期更新，以反映 API 的最新变化。
